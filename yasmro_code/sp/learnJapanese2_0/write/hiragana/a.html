<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Practice あ</title>
<link href="../../index.css" rel="stylesheet">
     <style>

        #canvas {
           margin: 10px;
           background-image: url(../../basicword/images/washi.jpg);
           border: 1px solid #aaaaaa;
        }

        input[type="image"]{
        	padding: 2px;
        	outline: none;
        }

        input[type="image"].active{
        	background-color: #fff;
        }
         
         .buttonBC {
  border:3px solid rgb(147,162,0);
  background-color: rgba(147,162,0,1);
  color: #fff;
  transition: .6s all;
  width: 120px;
  transition: 0.4s;
  cursor: pointer;
  border-radius: 5px;
}

.buttonBC:hover {
  border:3px solid rgb(147,162,0);
  background-color: rgba(147,162,0,.0);
  color:  rgba(147,162,0,1);
  transition: 0.4s;
}

     </style>
     
</head>

<body>
    <script src="../ht_docs_new/js/jquery-3.2.1.min.js"></script>
    <!-- Header -->

    <Header>
        <h1 id ="header">
             <!-- Let's Learn Japanese - for Novice - -->
            <a href="../../index.html"><img src="../../images/top.png" width="480"></a>
            
        </h1>
    
    </Header>
    
    <!-- Choice Category -->
    <div class="choice">
    <!--
        1. SVGの表示
        2. 1画ごと（レイヤー）にクリックすると色が変わる
        3. ドラッグすると、何らかの反応（描画テスト）
        4. 中心パス
        5. 中心パスに沿ってドラッグすると、fillで色塗り
        6. すべての画（レイヤー）で5．を適用
        7. 汎用性
    -->
    <h3>Let's practice 'あ'!</h3>


    <table>
    <tr>
    <td>
    <div id = "model">
    	<center>
        <h4>Model</h4>
        <svg width="300" height="300" id="char">
<g>
	<path d="M59.506,87.455c0-2.245-0.099-2.971-1.584-3.103l-1.584-0.132c-0.264-0.132-0.297-0.594-0.033-0.727
		c2.772-0.495,4.588-1.353,5.446-1.914c0.132,0,0.264,0.066,0.33,0.165c-0.066,0.594-0.132,2.244-0.132,4.125v12.806
		c0,2.541,0.066,3.102,1.419,3.201l1.386,0.099c0.198,0.198,0.165,0.726-0.066,0.825c-1.287-0.066-2.772-0.099-3.928-0.099
		c-1.188,0-2.673,0.033-3.96,0.099c-0.231-0.099-0.264-0.627-0.066-0.825l1.353-0.099c1.386-0.099,1.419-0.66,1.419-3.201V87.455z"
		/>
</g>
<g>
	<path d="M165.498,46.97c1.518,0,2.508-0.198,3.102-0.726c0.628-0.561,0.859-0.99,1.057-1.353c0.231-0.099,0.594,0,0.727,0.198
		c-0.43,1.65-1.023,3.367-1.519,4.027c-1.353-0.066-2.739-0.099-4.257-0.099h-4.787c-1.848,0-2.937,0.033-3.662,0.099
		c-0.066-0.033-0.232-0.165-0.232-0.429c0-0.099,0.166-0.231,0.363-0.363c1.519-0.99,2.607-2.112,5.051-4.753
		c2.178-2.343,4.719-5.545,4.719-9.076c0-3.003-1.451-4.819-4.125-4.819c-1.98,0-3.4,1.353-4.291,3.3
		c-0.297,0.165-0.792,0-0.792-0.429c1.056-2.905,3.663-4.654,6.634-4.654c3.301,0,5.445,2.211,5.445,5.38
		c0,2.046-0.957,4.291-3.531,7.261l-2.013,2.311c-2.706,3.103-3.003,3.63-3.003,3.829c0,0.231,0.164,0.297,1.022,0.297H165.498z"/>
</g>
<path id="L3-Path" opacity="0.7" fill="#006837" d="M134.229,216.726c-7.282,6.768-29.003,16.608-46.938,16.608
	c-11.956,0-26.768-8.413-26.789-24.574c-0.037-29.852,26.96-58.083,52.916-67.529c5.693-2.072,17.528-5.436,23.246-6.864
	c12.87-3.213,22.363-3.32,29.004-3.32c0.223-3.543,0-6.864-0.884-9.962l0.664-0.668c5.978,2.217,10.406,6.201,12.842,11.516
	c34.98,4.646,62.213,24.574,62.213,54.241c0,33.21-26.123,55.35-100.073,61.773l-1.109-3.767
	c44.723-6.418,67.086-33.433,67.309-59.333c0-19.929-7.527-36.531-25.906-43.394c0,1.548,0.224,3.097,0.224,4.646
	c-0.002,11.651-12.64,37.512-25.907,51.367C150.138,202.588,139.424,211.904,134.229,216.726z M143.085,175.989
	c9.937-9.547,17.934-25.684,21.257-37.417c-1.108,0-2.214-0.222-3.1-0.222c-8.413,0-17.03,1.031-24.355,4.206
	c-6.065,2.628-17.828,8.734-23.468,12.179c-13.285,8.12-26.347,26.791-26.347,38.966c0,8.635,2.658,10.629,13.062,10.629
	c5.315,0,14.638-4.021,20.369-8.412C126.479,191.339,137.657,181.208,143.085,175.989z"/>
<path id="L2-Path" opacity="0.7" fill="#ED1C24" d="M138.216,111.564c-0.666,6.418-1.109,14.614-1.552,22.803l0.223,8.19
	c0,7.31,0,20.591,6.198,33.433l11.955,21.478c0.443,1.771,0.886,3.766,0.886,5.535c0,5.534-3.097,16.827-13.061,16.827
	c-2.877,0-5.978-1.108-8.635-3.104c0,0-10.926-15.241-13.728-20.808c-4.685-9.324-7.083-27.53-7.083-41.183V141.23v-28.118
	l0.22-21.92c0.223-5.978,0.443-15.053,0.443-18.154c0-9.078-2.655-11.513-15.939-10.85l-0.443-0.886
	c3.321-6.864,12.842-12.399,20.369-12.399c21.034,0,31.438,8.192,31.438,15.278c0,3.764-4.648,8.413-5.535,12.398
	c-0.886,3.765-1.549,7.085-2.435,11.291L138.216,111.564z"/>
<path id="L1-Path" opacity="0.7" fill="#0000FF" d="M179.175,71.488c0.234-0.021,0.663-0.441,0.663-0.441
	c11.733,1.77,32.987,6.419,32.987,17.489c0,9.521-10.624,12.398-33.209,17.049c-13.063,2.658-27.453,4.648-41.4,5.979l-24.797,1.549
	c-2.658,0-5.315,0.223-7.97,0.223c-18.157,0-31.219-13.951-32.767-27.235l1.106-0.663c3.543,3.983,13.505,6.198,25.46,6.198
	C111.203,91.636,175.688,88.362,179.175,71.488z"/>
<g>
	<path d="M193.761,129.691c0-0.648,0.476-1.265,1.236-1.265s1.173,0.648,1.521,1.167c0.413,0.616,0.793,0.973,1.68,0.973
		c2.061,0,5.674-2.757,5.674-6.356c0-2.854-1.332-5.286-4.088-5.286c-1.554,0-2.695,0.778-3.424,1.589
		c-0.507-0.065-0.887-0.519-0.697-1.135c1.204-0.552,3.803-1.751,5.07-2.821c0.697-0.583,1.681-1.557,1.681-3.113
		c0-1.718-1.173-2.789-2.599-2.789c-1.87,0-3.297,1.2-4.279,2.854c-0.316,0.064-0.665-0.13-0.665-0.454
		c0.982-2.27,3.296-3.924,5.735-3.924c2.6,0,4.406,1.427,4.406,3.729c0,1.329-0.508,2.594-3.391,4.151
		c-0.159,0.324,0,0.454,0.379,0.486c2.409,0.195,4.596,1.914,4.596,4.994c0,2.335-1.108,4.67-3.074,6.42
		c-2.345,2.108-5.07,2.789-6.623,2.789C195.473,131.702,193.761,131.216,193.761,129.691z"/>
</g>
        </svg>
        </center>
    </div>
    
    </td>
    <td>
    <div id="tracecanvas">
    
    	<!--
        <object id="char2" type="image/svg+xml" data="i_trace.svg" width="512" height="512">
          <embed src="i_trace.svg" width="512" height="512"></embed>
        </object>
        -->
        <center>
        <h4>Trace Canvas</h4>
     	<canvas id="canvas" width="400" height="400">
        </canvas><br>
    <!--
	<label>Color:<input id="color" type="color"></label>
	<label>Weight:<input id="width" type="number" value="15" min="1" max="30"></label>
    -->
	<input type="button" id="delete_canvas" value="Clear" class="buttonBC" onClick="delete_canvas()" style="font-size:150%">
    <!--
  	<input type="image" id="pencil" src="../images/1.png" width="35px" class="active" onClick="tool(1)">
  	<input type="image" id="eraser" src="../images/2.png" width="35px" onClick="tool(2)">
    -->
    	</center>
    </div>
    </td>
    </tr>
    </table>
   
        <script type="text/javascript">
		
		
			/*
			var char = 'い';
			var ctx = document.getElementById('canvas').getContext('2d');
			//テキストの指定
			ctx.font= 'bold 400px';
			ctx.fillStyle = '#666666';
			//textAlignのサンプル
			ctx.textAlign = 'center';
			ctx.fillText('い', 0, 0);
			
			*/

		
		var img = new Image();
		img.src = 'svg/a.svg';
		img.onload = imageLoad;
		
		function imageLoad() {
	 	   var c = document.getElementById('canvas');
		   var ctx = c.getContext('2d');
		   ctx.drawImage(img, 0, 0, 400, 400);
		}
		


		var drawing = false;
		// 前回の座標を記録する（初期値：０）
		var before_x = 0;
		var before_y = 0;
	
		var canvas = document.getElementById('canvas');
		var ctx = canvas.getContext('2d');
	
		canvas.addEventListener('mousemove', draw_canvas);
		// マウスをクリックしてる時
		canvas.addEventListener('mousedown', function(e) {
			drawing = true;
			var rect = e.target.getBoundingClientRect();
			before_x = e.clientX - rect.left;
			before_y = e.clientY - rect.top;
		});
		// マウスをクリックしてない時
		canvas.addEventListener('mouseup', function() {
			drawing = false;
		});
    
    //修正
    function draw_refine(x, y){
  		if (!drawing){
			return
		};
        
        var canvas = document.getElementById('canvas');
        var context = canvas.getContext('2d');
        
        var i, j;
        var white = {r:255, g:255, b:255, a:255};
        var black = {r:0, g:0, b:0, a:255};
        
        var w= 30;
        for(i=-1*w; i<=w; i++){
            for(j=-1*w; j<=w; i++){
                var pxdata = context.getImageData(x, y, 1, 1);
                if(pxdata == white)
                    context.putImageData(pxdata, 0, 0, black)
            }
        }
    }
	
	// 描画の処理
	function draw_canvas(e) {
		// drawingがtrueじゃなかったら返す
		if (!drawing){
			return
		};
		var rect = e.target.getBoundingClientRect();
		var x = e.clientX - rect.left;
		var y = e.clientY - rect.top;
		var w = 25;
		var color = '#000000';
		var r   = parseInt(color.substring(1,3), 16);
		var g = parseInt(color.substring(3,5), 16);
		var b  = parseInt(color.substring(5,7), 16);
		// 描画
		ctx.lineCap = 'round';
		ctx.strokeStyle = 'rgb('+ r + ',' + g + ',' + b + ')';
		ctx.lineWidth = w;
		ctx.beginPath();
		ctx.moveTo(before_x, before_y);
		ctx.lineTo(x, y);
		ctx.stroke();
        //ctx.draw_refine(x,y);
		ctx.closePath();
        
		// 描画最後の座標を前回の座標に代入する
		before_x = x;
		before_y = y;
	}
	
	// クリアボタンクリック時
	// クリアボタンクリックした時にアラートを表示
	function delete_canvas(){
	  //ret = confirm('Clear the canvas.');
	  // アラートで「OK」を選んだ時
	  //if (ret == true){
		ctx.clearRect(0, 0, canvas.width, canvas.height);
		imageLoad();
	 // }
	}
	
	var pen = document.getElementById('pencil');
	var era = document.getElementById('eraser');
	pen.className = 'active';
	// 鉛筆と消しゴムの切り替え
	
	function tool(btnNum){
	// クリックされボタンが鉛筆だったら
	  if (btnNum == 1){
		ctx.globalCompositeOperation = 'source-over';
		pen.className = 'active';
		era.className = '';
	  }
	// クリックされボタンが消しゴムだったら
	  else if (btnNum == 2){
		ctx.globalCompositeOperation = 'destination-out';
		pen.className = '';
		era.className = 'active';
	  }
	}
	
	
	
	</script>
        
        
    
    
    
    
    <script>
        
        var s1 = document.getElementById("L1-Path");
        
        s1.onclick = Clicked;
        
        var s2 = document.getElementById("L2-Path");
        
        s2.onclick = Clicked;
		
		var s3 = document.getElementById("L3-Path");
        
        s3.onclick = Clicked;
        
        var s4 = document.getElementById("L4-Path");
        
        s4.onclick = Clicked;
        
        function Clicked(){
            this.setAttribute('fill', '#000000');
			this.setAttribute('opacity', '1');
        }
        
        
        /*
        var img = document.getElementById("char");
        var L1 = document.getElementById("L1-Path");
        
        img.onclick = img.setAttribute("fill", "#000000");
        //svg_img.onmouseout = changeDefaultColor;
        
        function changeColor() {
            img.setAttribute("fill", "#000000")
            //L1.setAttribute('fill', '#FFFFFF');
            alert("aaa");
           //document.getElementById('L1').setAttribute('fill', '#FFFFFF');
        }
        */
        
        /*
        $(function(){

            $('#char').click(function(){
                //クリックした時の処理
                $('#L1-Path').attr('fill','#000000');
            });

        });
        */
        
    </script>
    
</div>
<footer>
	<a href="../index.html"><img src="../../images/footerBack.png" hspace="20px"></a>
    
    <a href="../../index.html"><img src="../../images/footerTop.png" hspace="20px"></a>
</footer>



</body>
</html>
